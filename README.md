# System Design социальной сети для курса по System Design.

## Функциональные требования:
- Авторизация/регистрация
- Push-уведомления / e-mail о новых подписчиках, лайках, комментариях
- Минимальная модерация контента (жалобы на посты/пользователей)
- Публикация постов - текст, фото, геолокация
- Добавление комментариев
- Проставление реакций
- Подписка/отписка на других пользователей
- Лента постов по подпискам
- Просмотр профиля другого пользователя с его постами
- Общий поиск по популярным местам и просмотр постов, связанных с местом
- Поиск по пользователям

## Нефункициональные требования:
- SLA: ≥ 99.9%
- отказоустойчивость (кластеризация, репликация)
- бэкапы
- линейный рост пользователей (10M DAU через год, дальше рост)
- горизонтальное масштабирование (хранение постов, медиа, лента, подписки)
- API: ≤ 200–300 мс
- мобильные приложения (iOS, Android) + веб-версия
- rate limit
- безопасность данных
- данные храним всегда


## Базовые расчеты
DAU = 10 000 000

### Posts
write posts - 1 пост (20% пользователей → 2M постов в день) - 2 000 000 / 86400 ~ 24RPS  
3 фото на пост - 6 000 000 ~ 70 rps, но с учётом пиков — ×10 → ~700 RPS  
Трафик: ~3 MB × 2M × 3 ~ 18 TB/день на загрузку ~ 208 MB/сек

read posts - 20 постов - 20 × 10M = 200M / 86400 ~2.3k RPS (с пиком ×10 → ~23k RPS)  
Каждое обращение — отдача текста (~1 KB) + превью фото (200 KB)  
Траффик ~ 462 MB/сек ~ 40 TB/день на отдачу контента

### Comments
write comments - 2 комментария - 2 × 10M = 20M/день ~230 RPS (с пиком ×10 → ~2.3k RPS)  
Размер комментария ~200 B → ~46 KB/сек → ~4 GB/день  

read comments - 10 комментариев - 10 × 10M = 100M/день ~1200 RPS (с пиком ×10 → ~12к RPS)  

### Likes
10 лайков в день - 10 × 10M = 100M/день ~1200 RPS (с пиком ×10 → ~12k RPS)  
Трафик: минимальный (байты)  

## Итоговые нагрузки
### RPS (в среднем):
Посты write: 24  
Просмотры read: 2300  
Фото upload: 70  
Комментарии write/read: 1430  
Лайки: 1200  

Итого ≈ 4024 RPS (с пиками до 50k–60k RPS)  

### Трафик:
Upload (фото): ~18 TB/день  
Download (просмотр фото и текста): ~40 TB/день  
Итого ≈ 58 TB/день  

В секунду (среднее):
670 MB/сек (средняя полоса)

Если пиковый коэффициент ×10 (кратковременные пики):
RPS суммарно → ≈ 40k RPS (округл.)
Трафик → ≈ 670 MB/сек × 10 ≈ 6.7 GB/сек
